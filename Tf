resource "databricks_metastore_assignment" "workspace_binding" {
  for_each = module.workspace_collection

  metastore_id         = var.unity_catalog_metastore_id
  workspace_id         = each.value.workspace_id
  default_catalog_name = "hive_metastore"
}



resource "databricks_mws_permission_assignment" "workspace_admins_group" {
  for_each     = module.workspace_collection
  workspace_id = each.value.workspace_id
  principal_id = var.admin_group_id
  permissions  = var.group_permissions
}

resource "databricks_mws_permission_assignment" "workspace_admins_user" {
  for_each     = module.workspace_collection
  workspace_id = each.value.workspace_id
  principal_id = var.admin_user_id
  permissions  = var.user_permissions
}








variable "admin_group_id" {
  description = "Databricks group ID to assign permissions"
  type        = string
}

variable "admin_user_id" {
  description = "Databricks user ID to assign permissions"
  type        = string
}

variable "group_permissions" {
  description = "List of permissions to assign to the group"
  type        = list(string)
}

variable "user_permissions" {
  description = "List of permissions to assign to the user"
  type        = list(string)
}
